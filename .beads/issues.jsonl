{"id":"menumaker-1","title":"Fix column alignment on date picker","description":"The alignment on the date picker to select the date of when a dish is cooked is off. The day-of-week headers (Su, Mo, Tu, We, Th, Fr, Sa) are misaligned - 'Su' appears in the middle while 'Mo Tu We Th Fr Sa' are scrunched all the way to the right. The date numbers below are properly aligned in a 7-column grid, but the headers don't match up with their respective columns.\n\nScreenshot: Screenshot 2026-01-21 at 21.58.08.png","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-08T11:38:40.743121-05:00","updated_at":"2026-02-08T11:38:40.743121-05:00","closed_at":"2026-02-08T11:38:40.337799-05:00"}
{"id":"menumaker-2","title":"Redesign Weekly Menu page with category-based suggestions","description":"Replace the day-based weekly menu with category-based dish suggestions that help users discover what to cook.\n\n## Categories\n\n1. **Reliable Favorites** - timesCooked \u003e= 5, made within last 60 days\n2. **Blast from the Past** - timesCooked \u003e= 3, last made 60+ days ago\n3. **Give It Another Shot** - timesCooked 1-2, last made 30+ days ago\n4. **Cuisine You're Missing** - Cuisine not cooked in 14+ days\n\n## Requirements\n\n- Show 2-3 dishes per category\n- Shuffle button per category to get different suggestions\n- \"Plan this meal\" button on each dish to schedule it\n- Remove all day-based UI elements\n- Keep the page useful for planning a week's meals","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-08T11:38:40.743426-05:00","updated_at":"2026-02-08T11:38:40.743426-05:00","closed_at":"2026-02-08T11:38:40.412813-05:00","labels":["feature","ui"]}
{"id":"menumaker-3","title":"Cooking a dish doesn't update UI until page reload","description":"When you click to cook something on the main page, the UI doesn't reflect the change. The data is persisted correctly (reloading the page shows updated data), but the UI state doesn't automatically update after the mutation. Likely a TanStack Query cache invalidation issue — the mutation probably isn't invalidating the relevant queries after success.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-08T11:38:40.743571-05:00","updated_at":"2026-02-08T15:22:22.620046-05:00","closed_at":"2026-02-08T15:22:22.620046-05:00","close_reason":"Fixed missing cache invalidation for mealHistoryByDate query key in meal history mutations and dish delete mutation"}
{"id":"menumaker-4","title":"Today's dishes appear in both Today's Menu and Coming Up after 8pm ET","description":"After 8pm ET, today's dishes show up in both the \"Today's Menu\" section and the \"Coming Up\" section. This is almost certainly a timezone bug where UTC is being used inconsistently — after 8pm ET (which is midnight UTC), date comparisons using UTC would consider 'today' as the next day, causing today's meals to also appear in the upcoming list.\n\n## Root cause\n\nIn `src/hooks/meal-history/useMealHistoryByDate.tsx`, `getTodaysMeals()` correctly uses local dates via `getLocalDateString(new Date())`. However, `getUpcomingMeals()` compares `meal.date.split(\"T\")[0]` (the raw DB date string, which is UTC-based) against the local `todayKey`. After 8pm ET (midnight UTC), a meal stored as today in local time may have a UTC date of tomorrow, causing it to pass the `mealDate \u003e todayKey` filter and appear in upcoming.\n\n## Fix direction\n\nEnsure `getUpcomingMeals()` uses locally-parsed dates for comparison, consistent with `getTodaysMeals()`. Parse `meal.date` through `new Date()` and then `getLocalDateString()` rather than doing raw string splitting on the UTC representation.\n\n## Key files\n- `src/hooks/meal-history/useMealHistoryByDate.tsx` — `getUpcomingMeals()` (line ~86)\n- `src/components/dashboard/ComingUp.tsx` — rendering (already handles dates correctly)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-08T11:38:40.743694-05:00","updated_at":"2026-02-08T16:08:38.847559-05:00","closed_at":"2026-02-08T16:08:38.847559-05:00","close_reason":"Fixed timezone bug: getUpcomingMeals() now uses getLocalDateString() instead of raw UTC string splitting"}
{"id":"menumaker-5","title":"Add delete button to dish detail page","description":"There is currently no way to delete a dish. Add a delete button to the dish detail page. Should include a confirmation dialog to prevent accidental deletions. On successful delete, navigate back to the dish list.\n\n## Cascade behavior\n\nThe database handles cleanup automatically — `meal_history.dishid` and `dish_tags.dish_id` both have `ON DELETE CASCADE` foreign keys, so deleting from the `dishes` table will automatically remove associated meal history and tags. No app-level cascade logic needed.\n\n## Key files\n- `src/pages/MealDetail.tsx` — dish detail page where the button should go\n- `src/hooks/dish/useDishMutations.tsx` — add a `deleteDish` mutation\n- Use existing shadcn AlertDialog for the confirmation dialog","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-08T11:38:40.743813-05:00","updated_at":"2026-02-08T16:08:38.965406-05:00","closed_at":"2026-02-08T16:08:38.965406-05:00","close_reason":"Added delete button with AlertDialog confirmation to dish detail page"}
{"id":"menumaker-6","title":"Replace Coming Up with unified week timeline showing recent and upcoming","description":"Replace the current 'Coming Up' card on the dashboard with a unified chronological timeline that shows both recent meals (past few days) and upcoming meals this week, with today as the natural divider.\n\n## Design\n- Single card replacing 'Coming Up' in the existing two-column grid\n- Timeline flows chronologically: recent past at top, upcoming at bottom (or vice versa — upcoming first may feel more actionable)\n- Today is visually distinct as the divider/anchor point (handled by the existing TodaysMenu hero card above)\n- Compact card design optimized for mobile — this is the primary use case\n- Reuse the existing RecentlyCooked component logic or the useStats hook's recentlyCooked data for the 'recent' portion\n- Reuse getUpcomingMeals() from useMealHistoryByDate() for the upcoming portion, filtered to this week only\n\n## Scope\n- Show ~3 days back and remainder of the current week ahead\n- Each entry: dish name, cuisine badge, date label (e.g. 'Yesterday', 'Mon', 'Wed')\n- Keep items compact — single line per dish where possible\n- Skip today (already shown in TodaysMenu hero card)\n- Empty states for both sections if no data\n\n## Context\n- Existing unused RecentlyCooked.tsx component may be a starting point\n- useMealHistoryByDate() hook already provides getUpcomingMeals() and getMealsForDate()\n- Primary app usage is mobile, so compact layout is critical\n- This sets groundwork for upcoming user feedback features","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-08T11:38:40.743931-05:00","updated_at":"2026-02-08T16:08:39.077016-05:00","closed_at":"2026-02-08T16:08:39.077016-05:00","close_reason":"Replaced ComingUp with WeekTimeline showing recent and upcoming meals, added getRecentMeals() to useMealHistoryByDate"}
