{"id":"menumaker-1","title":"Fix column alignment on date picker","description":"The alignment on the date picker to select the date of when a dish is cooked is off. The day-of-week headers (Su, Mo, Tu, We, Th, Fr, Sa) are misaligned - 'Su' appears in the middle while 'Mo Tu We Th Fr Sa' are scrunched all the way to the right. The date numbers below are properly aligned in a 7-column grid, but the headers don't match up with their respective columns.\n\nScreenshot: Screenshot 2026-01-21 at 21.58.08.png","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-08T11:38:40.743121-05:00","updated_at":"2026-02-08T11:38:40.743121-05:00","closed_at":"2026-02-08T11:38:40.337799-05:00"}
{"id":"menumaker-1qf","title":"Shared Households","description":"Multi-user support via shared households. Epic tracking all implementation tasks.","status":"open","priority":1,"issue_type":"feature","owner":"keith.bourgoin@gmail.com","created_at":"2026-02-16T10:15:54.608097-05:00","created_by":"Keith Bourgoin","updated_at":"2026-02-16T10:15:54.608097-05:00"}
{"id":"menumaker-2","title":"Redesign Weekly Menu page with category-based suggestions","description":"Replace the day-based weekly menu with category-based dish suggestions that help users discover what to cook.\n\n## Categories\n\n1. **Reliable Favorites** - timesCooked \u003e= 5, made within last 60 days\n2. **Blast from the Past** - timesCooked \u003e= 3, last made 60+ days ago\n3. **Give It Another Shot** - timesCooked 1-2, last made 30+ days ago\n4. **Cuisine You're Missing** - Cuisine not cooked in 14+ days\n\n## Requirements\n\n- Show 2-3 dishes per category\n- Shuffle button per category to get different suggestions\n- \"Plan this meal\" button on each dish to schedule it\n- Remove all day-based UI elements\n- Keep the page useful for planning a week's meals","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-08T11:38:40.743426-05:00","updated_at":"2026-02-08T11:38:40.743426-05:00","closed_at":"2026-02-08T11:38:40.412813-05:00","labels":["feature","ui"]}
{"id":"menumaker-3","title":"Cooking a dish doesn't update UI until page reload","description":"When you click to cook something on the main page, the UI doesn't reflect the change. The data is persisted correctly (reloading the page shows updated data), but the UI state doesn't automatically update after the mutation. Likely a TanStack Query cache invalidation issue — the mutation probably isn't invalidating the relevant queries after success.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-08T11:38:40.743571-05:00","updated_at":"2026-02-08T15:22:22.620046-05:00","closed_at":"2026-02-08T15:22:22.620046-05:00","close_reason":"Fixed missing cache invalidation for mealHistoryByDate query key in meal history mutations and dish delete mutation"}
{"id":"menumaker-4","title":"Today's dishes appear in both Today's Menu and Coming Up after 8pm ET","description":"After 8pm ET, today's dishes show up in both the \"Today's Menu\" section and the \"Coming Up\" section. This is almost certainly a timezone bug where UTC is being used inconsistently — after 8pm ET (which is midnight UTC), date comparisons using UTC would consider 'today' as the next day, causing today's meals to also appear in the upcoming list.\n\n## Root cause\n\nIn `src/hooks/meal-history/useMealHistoryByDate.tsx`, `getTodaysMeals()` correctly uses local dates via `getLocalDateString(new Date())`. However, `getUpcomingMeals()` compares `meal.date.split(\"T\")[0]` (the raw DB date string, which is UTC-based) against the local `todayKey`. After 8pm ET (midnight UTC), a meal stored as today in local time may have a UTC date of tomorrow, causing it to pass the `mealDate \u003e todayKey` filter and appear in upcoming.\n\n## Fix direction\n\nEnsure `getUpcomingMeals()` uses locally-parsed dates for comparison, consistent with `getTodaysMeals()`. Parse `meal.date` through `new Date()` and then `getLocalDateString()` rather than doing raw string splitting on the UTC representation.\n\n## Key files\n- `src/hooks/meal-history/useMealHistoryByDate.tsx` — `getUpcomingMeals()` (line ~86)\n- `src/components/dashboard/ComingUp.tsx` — rendering (already handles dates correctly)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-08T11:38:40.743694-05:00","updated_at":"2026-02-08T16:08:38.847559-05:00","closed_at":"2026-02-08T16:08:38.847559-05:00","close_reason":"Fixed timezone bug: getUpcomingMeals() now uses getLocalDateString() instead of raw UTC string splitting"}
{"id":"menumaker-4i9","title":"Task 6: Create useHouseholdQueries hook","description":"Query hook for fetching current user household and member list. TDD with tests.","status":"closed","priority":2,"issue_type":"task","owner":"keith.bourgoin@gmail.com","created_at":"2026-02-16T10:16:27.86498-05:00","created_by":"Keith Bourgoin","updated_at":"2026-02-16T10:29:57.41631-05:00","closed_at":"2026-02-16T10:29:57.41631-05:00","close_reason":"Hooks created and committed with ts-expect-error for pending type regeneration","dependencies":[{"issue_id":"menumaker-4i9","depends_on_id":"menumaker-f88","type":"blocks","created_at":"2026-02-16T10:16:53.549513-05:00","created_by":"Keith Bourgoin"}]}
{"id":"menumaker-5","title":"Add delete button to dish detail page","description":"There is currently no way to delete a dish. Add a delete button to the dish detail page. Should include a confirmation dialog to prevent accidental deletions. On successful delete, navigate back to the dish list.\n\n## Cascade behavior\n\nThe database handles cleanup automatically — `meal_history.dishid` and `dish_tags.dish_id` both have `ON DELETE CASCADE` foreign keys, so deleting from the `dishes` table will automatically remove associated meal history and tags. No app-level cascade logic needed.\n\n## Key files\n- `src/pages/MealDetail.tsx` — dish detail page where the button should go\n- `src/hooks/dish/useDishMutations.tsx` — add a `deleteDish` mutation\n- Use existing shadcn AlertDialog for the confirmation dialog","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-08T11:38:40.743813-05:00","updated_at":"2026-02-08T16:08:38.965406-05:00","closed_at":"2026-02-08T16:08:38.965406-05:00","close_reason":"Added delete button with AlertDialog confirmation to dish detail page"}
{"id":"menumaker-6","title":"Replace Coming Up with unified week timeline showing recent and upcoming","description":"Replace the current 'Coming Up' card on the dashboard with a unified chronological timeline that shows both recent meals (past few days) and upcoming meals this week, with today as the natural divider.\n\n## Design\n- Single card replacing 'Coming Up' in the existing two-column grid\n- Timeline flows chronologically: recent past at top, upcoming at bottom (or vice versa — upcoming first may feel more actionable)\n- Today is visually distinct as the divider/anchor point (handled by the existing TodaysMenu hero card above)\n- Compact card design optimized for mobile — this is the primary use case\n- Reuse the existing RecentlyCooked component logic or the useStats hook's recentlyCooked data for the 'recent' portion\n- Reuse getUpcomingMeals() from useMealHistoryByDate() for the upcoming portion, filtered to this week only\n\n## Scope\n- Show ~3 days back and remainder of the current week ahead\n- Each entry: dish name, cuisine badge, date label (e.g. 'Yesterday', 'Mon', 'Wed')\n- Keep items compact — single line per dish where possible\n- Skip today (already shown in TodaysMenu hero card)\n- Empty states for both sections if no data\n\n## Context\n- Existing unused RecentlyCooked.tsx component may be a starting point\n- useMealHistoryByDate() hook already provides getUpcomingMeals() and getMealsForDate()\n- Primary app usage is mobile, so compact layout is critical\n- This sets groundwork for upcoming user feedback features","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-08T11:38:40.743931-05:00","updated_at":"2026-02-08T16:08:39.077016-05:00","closed_at":"2026-02-08T16:08:39.077016-05:00","close_reason":"Replaced ComingUp with WeekTimeline showing recent and upcoming meals, added getRecentMeals() to useMealHistoryByDate"}
{"id":"menumaker-64l","title":"Task 13: Add Household tab to Settings page","description":"Wire HouseholdSettings into Settings page as new tab","status":"open","priority":2,"issue_type":"task","owner":"keith.bourgoin@gmail.com","created_at":"2026-02-16T10:16:33.712619-05:00","created_by":"Keith Bourgoin","updated_at":"2026-02-16T10:16:33.712619-05:00","dependencies":[{"issue_id":"menumaker-64l","depends_on_id":"menumaker-v08","type":"blocks","created_at":"2026-02-16T10:16:54.531812-05:00","created_by":"Keith Bourgoin"}]}
{"id":"menumaker-901","title":"Task 15: Final verification","description":"Run bun run quality, test full flow manually with local DB","status":"open","priority":2,"issue_type":"task","owner":"keith.bourgoin@gmail.com","created_at":"2026-02-16T10:16:35.464716-05:00","created_by":"Keith Bourgoin","updated_at":"2026-02-16T10:16:35.464716-05:00","dependencies":[{"issue_id":"menumaker-901","depends_on_id":"menumaker-64l","type":"blocks","created_at":"2026-02-16T10:16:54.751459-05:00","created_by":"Keith Bourgoin"},{"issue_id":"menumaker-901","depends_on_id":"menumaker-k8l","type":"blocks","created_at":"2026-02-16T10:16:54.856009-05:00","created_by":"Keith Bourgoin"},{"issue_id":"menumaker-901","depends_on_id":"menumaker-apx","type":"blocks","created_at":"2026-02-16T10:16:54.964132-05:00","created_by":"Keith Bourgoin"}]}
{"id":"menumaker-9ij","title":"Task 2: DB migration - helper function and RLS policies","description":"Create auth.household_id() helper function, drop all user-scoped RLS policies, create household-scoped policies. Migration file: supabase/migrations/20260216_000002_household_rls.sql","status":"closed","priority":1,"issue_type":"task","owner":"keith.bourgoin@gmail.com","created_at":"2026-02-16T10:16:23.922821-05:00","created_by":"Keith Bourgoin","updated_at":"2026-02-16T10:19:55.65127-05:00","closed_at":"2026-02-16T10:19:55.65127-05:00","close_reason":"RLS migration created and committed","dependencies":[{"issue_id":"menumaker-9ij","depends_on_id":"menumaker-9o8","type":"blocks","created_at":"2026-02-16T10:16:53.101305-05:00","created_by":"Keith Bourgoin"}]}
{"id":"menumaker-9o8","title":"Task 1: DB migration - households table and schema","description":"Create households table, add household_id to profiles and all data tables, backfill existing data. Migration file: supabase/migrations/20260216_000001_add_households.sql","status":"closed","priority":1,"issue_type":"task","owner":"keith.bourgoin@gmail.com","created_at":"2026-02-16T10:16:22.938834-05:00","created_by":"Keith Bourgoin","updated_at":"2026-02-16T10:18:41.899406-05:00","closed_at":"2026-02-16T10:18:41.899406-05:00","close_reason":"Migration file created and committed"}
{"id":"menumaker-apx","title":"Task 9: Update source/tag/meal_history mutations","description":"Add household_id to all other mutation hooks that do inserts","status":"open","priority":2,"issue_type":"task","owner":"keith.bourgoin@gmail.com","created_at":"2026-02-16T10:16:30.383722-05:00","created_by":"Keith Bourgoin","updated_at":"2026-02-16T10:16:30.383722-05:00","dependencies":[{"issue_id":"menumaker-apx","depends_on_id":"menumaker-l3c","type":"blocks","created_at":"2026-02-16T10:16:53.887789-05:00","created_by":"Keith Bourgoin"}]}
{"id":"menumaker-crz","title":"Task 4: Regenerate Supabase types","description":"Run bun run db:update-types to regenerate TypeScript types after migrations","status":"closed","priority":2,"issue_type":"task","owner":"keith.bourgoin@gmail.com","created_at":"2026-02-16T10:16:25.875598-05:00","created_by":"Keith Bourgoin","updated_at":"2026-02-16T10:21:49.481126-05:00","closed_at":"2026-02-16T10:21:49.481126-05:00","close_reason":"Deferred - types will be regenerated after migrations are applied to local DB during integration testing (Task 15). For now, we will manually add the needed types.","dependencies":[{"issue_id":"menumaker-crz","depends_on_id":"menumaker-j69","type":"blocks","created_at":"2026-02-16T10:16:53.326455-05:00","created_by":"Keith Bourgoin"}]}
{"id":"menumaker-f88","title":"Task 5: Add Household entity type and mapper","description":"Add Household entity to types/entities.ts, add householdId to ProfileEntity, create household mappers, update barrel exports","status":"closed","priority":2,"issue_type":"task","owner":"keith.bourgoin@gmail.com","created_at":"2026-02-16T10:16:26.776188-05:00","created_by":"Keith Bourgoin","updated_at":"2026-02-16T10:23:59.292384-05:00","closed_at":"2026-02-16T10:23:59.292384-05:00","close_reason":"Household entity type, DB type, mapper, and profile updates all committed","dependencies":[{"issue_id":"menumaker-f88","depends_on_id":"menumaker-crz","type":"blocks","created_at":"2026-02-16T10:16:53.437027-05:00","created_by":"Keith Bourgoin"}]}
{"id":"menumaker-j69","title":"Task 3: DB migration - views and functions","description":"Recreate dish_summary materialized view with household_id, update dish_summary_secure, update handle_new_user, create join_household/leave_household/regenerate_invite_code functions. Migration file: supabase/migrations/20260216_000003_household_functions.sql","status":"closed","priority":1,"issue_type":"task","owner":"keith.bourgoin@gmail.com","created_at":"2026-02-16T10:16:25.011677-05:00","created_by":"Keith Bourgoin","updated_at":"2026-02-16T10:21:42.961552-05:00","closed_at":"2026-02-16T10:21:42.961552-05:00","close_reason":"Views and functions migration created and committed","dependencies":[{"issue_id":"menumaker-j69","depends_on_id":"menumaker-9ij","type":"blocks","created_at":"2026-02-16T10:16:53.20982-05:00","created_by":"Keith Bourgoin"}]}
{"id":"menumaker-jt4","title":"Task 7: Create useHouseholdMutations hook","description":"Mutations for join, leave, update name, regenerate invite code. Uses Supabase RPC. TDD with tests.","status":"closed","priority":2,"issue_type":"task","owner":"keith.bourgoin@gmail.com","created_at":"2026-02-16T10:16:28.673771-05:00","created_by":"Keith Bourgoin","updated_at":"2026-02-16T10:29:57.418136-05:00","closed_at":"2026-02-16T10:29:57.418136-05:00","close_reason":"Hooks created and committed with ts-expect-error for pending type regeneration","dependencies":[{"issue_id":"menumaker-jt4","depends_on_id":"menumaker-f88","type":"blocks","created_at":"2026-02-16T10:16:53.663232-05:00","created_by":"Keith Bourgoin"}]}
{"id":"menumaker-k8l","title":"Task 14: Handle invite code in auth flow","description":"Preserve invite code through auth redirect, redirect to /join/:code after successful auth","status":"open","priority":2,"issue_type":"task","owner":"keith.bourgoin@gmail.com","created_at":"2026-02-16T10:16:34.580223-05:00","created_by":"Keith Bourgoin","updated_at":"2026-02-16T10:16:34.580223-05:00","dependencies":[{"issue_id":"menumaker-k8l","depends_on_id":"menumaker-lv5","type":"blocks","created_at":"2026-02-16T10:16:54.643535-05:00","created_by":"Keith Bourgoin"}]}
{"id":"menumaker-l3c","title":"Task 8: Update dish mutations with household_id","description":"Update useDishMutations to fetch profile.household_id and include it on inserts","status":"in_progress","priority":2,"issue_type":"task","owner":"keith.bourgoin@gmail.com","created_at":"2026-02-16T10:16:29.63741-05:00","created_by":"Keith Bourgoin","updated_at":"2026-02-16T10:30:02.99106-05:00","dependencies":[{"issue_id":"menumaker-l3c","depends_on_id":"menumaker-4i9","type":"blocks","created_at":"2026-02-16T10:16:53.773725-05:00","created_by":"Keith Bourgoin"}]}
{"id":"menumaker-l8m","title":"Task 10: Update AuthProvider for /join routes","description":"Allow /join/* routes without authentication redirect in AuthProvider","status":"in_progress","priority":2,"issue_type":"task","owner":"keith.bourgoin@gmail.com","created_at":"2026-02-16T10:16:31.302039-05:00","created_by":"Keith Bourgoin","updated_at":"2026-02-16T10:30:03.089188-05:00","dependencies":[{"issue_id":"menumaker-l8m","depends_on_id":"menumaker-f88","type":"blocks","created_at":"2026-02-16T10:16:53.997507-05:00","created_by":"Keith Bourgoin"}]}
{"id":"menumaker-lv5","title":"Task 11: Create JoinHousehold page","description":"Page at /join/:inviteCode handling the join flow. Add route to App.tsx.","status":"open","priority":2,"issue_type":"task","owner":"keith.bourgoin@gmail.com","created_at":"2026-02-16T10:16:31.955793-05:00","created_by":"Keith Bourgoin","updated_at":"2026-02-16T10:16:31.955793-05:00","dependencies":[{"issue_id":"menumaker-lv5","depends_on_id":"menumaker-l8m","type":"blocks","created_at":"2026-02-16T10:16:54.101709-05:00","created_by":"Keith Bourgoin"},{"issue_id":"menumaker-lv5","depends_on_id":"menumaker-jt4","type":"blocks","created_at":"2026-02-16T10:16:54.209964-05:00","created_by":"Keith Bourgoin"}]}
{"id":"menumaker-v08","title":"Task 12: Create HouseholdSettings component","description":"Settings component with household name, member list, invite link copy/regenerate, leave button with confirmation dialog","status":"open","priority":2,"issue_type":"task","owner":"keith.bourgoin@gmail.com","created_at":"2026-02-16T10:16:32.841536-05:00","created_by":"Keith Bourgoin","updated_at":"2026-02-16T10:16:32.841536-05:00","dependencies":[{"issue_id":"menumaker-v08","depends_on_id":"menumaker-4i9","type":"blocks","created_at":"2026-02-16T10:16:54.317218-05:00","created_by":"Keith Bourgoin"},{"issue_id":"menumaker-v08","depends_on_id":"menumaker-jt4","type":"blocks","created_at":"2026-02-16T10:16:54.423805-05:00","created_by":"Keith Bourgoin"}]}
